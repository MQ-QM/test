## 原版本

STM32F4简易波形图显示

————小马哥————2018.3.14 --2018.3.16

内容：在显示屏上通过按键产生正弦波，三角波，矩形波，锯齿波，并且能通过按键来暂停波形，显示静态波形，并且显示波形电压的峰峰值。

一．波形图显示
1生成正弦波，三角波，矩形波。锯齿波数据
2将这些数据显示到TFT2.4寸液晶屏上

思路：用数组1，2，3，4分别保存正弦波，三角波，矩形波。锯齿波数据，写按键函数分别打印不同的数组内容，然后再将数组内容打印到TFT液晶屏上。

二．峰峰值显示
1从数组中采集最大和最小值，然后做差求得峰峰值，显示到TFT液晶屏上。

优化：使用DMA来减轻CPU的负担，提高数据传输速度。

//STM32 使用DMA+DAC+TIMER输出正弦波//
那么对于使用DMA+DAC+TIMER产生正弦波的原理或过程，我有这样一个简单的理解： 先将一个可以生成正弦波的数据表保存在静态内存中，然后在DAC以及这块内存中间使用DMA建立一个通道，经过以上步骤之后，DAC模块就可以通过DMA通道拿取静态内存中可以生成正弦波的数据，拿取数据，然后经过数模准换，在引脚进行输出就可以得到正弦波了。那么当然，这个速度是非常快的，如果没有一定的延时，那么得到的估计就是一个变化很快的模拟量。所以这个时候就需要使用定时器TIMER了。DAC在初始化的时候，可以设置成使用定时器触发，这就意味着，当定时器溢满的时候，就会触发DAC工作。这样一来，就可以通过改变定时器的定时时间来改变正弦波的周期了。电压大小的显示用DAC来处理。（PA4和PA5短接，DAC与ADC结合。）

## 修改记录

在网友代码的基础上增加了一个功能：按下黄色按键（KEY_UP,KEY_0,KEY_1,KEY_2）,动态正弦波会暂停，按下红色按键（RESERT）动态波形重新显示

操作：只需要在HARDWARE文件下添加key.c和key.h文件，在做修改即可

## 再修改

把DAC头文件和源文件删除了，居然还有波形

PA4  : DAC把正弦数字数据转化为模拟数据，把模拟数据给PA5  ：
模拟量转化为数字量，生成波形和Vpp大小

为什么DACGPIO配置  PIN4或PIN5

## 第三次修改

基本完成四种波形的run和stop，但无法完成在暂停键按下去之后，
按其他的按键可以直接跳转到那个按键对应的波形